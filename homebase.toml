# homebase.toml - Single source of truth for tool definitions
#
# [host]      → Brewfile (Layer 0, all platforms)
# [container] → flake.nix / images/Containerfile (Layer 1)
# [workspace] → just setup-workspace (post-bootstrap)

[host]
# Minimal tools for the host OS (Homebrew)
tools = ["git", "chezmoi", "zsh", "just", "direnv", "node", "gum"]
# node: provides npm for AI agent CLIs installed at host level (codex, ACP adapters)
# 1password-cli: installed as cask in platform bootstrap scripts (not a brew formula)
# tailscale: host-level VPN mesh (pre-installed on Bazzite, cask on macOS)
# Configured manually after bootstrap (tailscale up)

[container]
# All dev tools baked into the distrobox image (Nix flake)
# Use nixpkgs attribute names directly (no aliases here).
packages = [
  # Core
  "git",
  "zsh",
  "chezmoi",
  "just",
  "direnv",
  # Search and navigation
  "ripgrep",
  "fd",
  "fzf",
  "zoxide",
  "tree",
  # Modern CLI tools
  "bat",
  "eza",
  "jq",
  "yq-go",
  "delta",
  "glow",
  "gum",
  "tealdeer",
  # Git
  "gh",
  "lazygit",
  # Shell
  "starship",
  "atuin",
  "shellcheck",
  "tmux",
  "nushell",
  "zsh-autosuggestions",
  "zsh-syntax-highlighting",
  # System essentials
  "curl",
  "wget",
  "watch",
  "less",
  "file",
  "lsof",
  "bottom",
]
# Special package expressions defined in flake.nix.
# Use these for custom builds that aren't plain nixpkgs attrs.
include = ["emacs-vterm"]
# AI agent CLIs are host-level tools (brew/npm/curl), not baked into the
# container. They use host brew's node/npm. Managed via ~/.homebase/justfile:
# claude-code, codex, gemini-cli, ACP adapters

[profiles.base]
# Default daily-driver profile.
# flake_env maps to flake output package name (see flake.nix packages).
flake_env = "homebase-base-env"
base_image = "registry.fedoraproject.org/fedora-toolbox:43"

[profiles.gamedev]
# Heavy game-development stack on top of the base profile.
# Godot downloaded from official releases (not Nix/DNF) for latest versions + GPU access.
# Export templates baked in at /opt/godot/export_templates/<version>.stable/
flake_env = "homebase-gamedev-env"
base_image = "registry.fedoraproject.org/fedora-toolbox:43"
dnf_packages = ["dotnet-sdk-10.0"]
godot_version = "4.6.1"

[fonts]
# Host-level fonts (not in container — terminal and display server are on the host)
# Bazzite: downloaded to ~/.local/share/fonts/ during bootstrap
# macOS: installed via Homebrew cask
nerd-fonts = ["FiraCode", "FiraMono"]

[macos]
# Homebrew casks (GUI apps, macOS only)
casks = ["emacs", "tailscale", "font-fira-code-nerd-font", "font-fira-mono-nerd-font"]

[flatpaks]
# Host-level desktop apps via Flatpak (Flathub)
# Install: homebase setup-flatpaks
# Update:  homebase update-flatpaks
apps = [
  # Core workflow
  "md.obsidian.Obsidian",
  "com.discordapp.Discord",
  "com.slack.Slack",
  # Common apps
  "com.usebottles.bottles",
  "com.spotify.Client",
  "com.ktechpit.whatsie",
  # Developer
  "dev.zed.Zed",
  # Browsers
  "com.brave.Browser",
  "app.zen_browser.zen",
  # Games (steam is pre-installed on Bazzite)
  "org.prismlauncher.PrismLauncher",
]

[workspace]
# Workspace layout — managed by chezmoi (externals + run_once script)
# ~/forge              cloned via .chezmoiexternal.toml (regular clone, not worktree)
# ~/dev/.worktrees/    bare clones (hidden, not worked in directly)
# ~/dev/me/            github.com/farra (worktrees checked out here)
# ~/dev/jmt/           github.com/jamandtea
# ~/dev/ref/           third-party / reference
